<head>
    <link href="https://fonts.googleapis.com/css?family=Montserrat:300,400,700|Roboto:400,700" rel="stylesheet">
    <link href='style.css' rel='stylesheet' type='text/css'>
    <title>Quant'è lungo il tuo libbberale?</title>
    <link rel="icon" type="x-icon" href="icon.png">
    <link rel="shortcut icon" type="x-icon" href="icon.png">
    <meta charset="utf-8">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
</head>
    
<body>
    <a href="https://www.umbertobertonelli.it/" id="logo">
        <img src="img/DRELEGANTIA_LOGO.webp" style="width: 100%;">
    </a>
    <h1 class="title">Quant'è lungo il tuo libbberale?</h1>
    <svg id="svgHeader" style="width: 100%;" viewBox="0 0 112 14">
        <text x="50%" y="10" class="svgHeader">Quant'è lungo il tuo libbberale?</text>
    </svg>
    <hr>
    
	<h1 class="title">Risultato</h1>
    <svg id="svgHeader" style="width: 100%;" viewBox="0 0 112 11">
		<text x="50%" y="8" class="svgHeader">Risultato</text>
	</svg>
    
    <img src="" id="banner"></canvas></br>
    <p style="text-align:center;margin:-2px auto">Suggerimento: puoi scaricare direttamente questa immagine. Non è necessario fare uno screenshot!</p></br>
    <p style="text-align:center;margin:-2px auto">Seguici su <a href="https://www.youtube.com/@Dr.Elegantia">EconomiaItalia</a></p></br>
    <p style="text-align:center;margin:-2px auto">Qui i risultati della <a href="https://raw.githubusercontent.com/EconomiaItalia/libbberale/master/prima_stagione.png">prima stagione</a></p></br>
    <button class="white_button" onclick="location.href='index.html';">Indietro</button> <br>
    <a target="_blank" class="util share-tw" href="https://twitter.com/intent/tweet?text=Il%20mio%20risultato%20al%20test%20libbberale%20è%20{{risultato}}%20LiBBB!%20&amp;url=https%3A%2F%2Fwww.example.com%2Frisultato%2Fxyz&amp;hashtags=libbberale">Condividi su Twitter</a>

    <script type="application/javascript" src="results.js"></script>
    <script>
        const urlParams = new URLSearchParams(window.location.search);
        var x_axis = parseFloat(urlParams.get("right"));
        var y_axis = parseFloat(urlParams.get("auth"));
        var z_axis = parseFloat(urlParams.get("prog"));
	
        results.push({"nome": "background", "image":"./compass_drelegantia.png", "x_axis": 0, "y_axis": 0});
	    
        function loadImages(callback) {
            var loadedImages = 0;
            var numImages = 0;
            // get num of sources
            for(var res in results) {
                numImages++;
            }
            for(var res in results) {
                results[res]["imageObj"] = new Image();
                results[res]["imageObj"].onload = function() {
if(++loadedImages >= numImages) {
callback();
}
};
results[res]["imageObj"].src = results[res]["image"];
}
}

    function drawImage(imageObj, x, y) {
        var canvas = document.getElementById("banner");
        var ctx = canvas.getContext("2d");
        ctx.drawImage(imageObj, x, y);
    }

    function drawImages() {
        for(var res in results) {
            drawImage(results[res]["imageObj"], results[res]["x_axis"] + x_axis, results[res]["y_axis"] + y_axis);
        }
    }

    function calculateResult() {
        var result = z_axis + Math.floor((x_axis + y_axis) / 2);
        return result;
    }

    loadImages(function() {
        drawImages();
        var result = calculateResult();
        document.querySelector(".svgHeader").innerHTML = "Risultato: " + result;
        var shareLink = document.querySelector(".share-tw");
        shareLink.href = shareLink.href.replace("{{risultato}}", result);
    });
</script>
</body>
